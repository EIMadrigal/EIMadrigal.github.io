<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"eimadrigal.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"manual","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Hello World">
<meta property="og:type" content="website">
<meta property="og:title" content="EI Madrigal&#39;s Space">
<meta property="og:url" content="https://eimadrigal.github.io/page/2/index.html">
<meta property="og:site_name" content="EI Madrigal&#39;s Space">
<meta property="og:description" content="Hello World">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="EIMadrigal">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://eimadrigal.github.io/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>EI Madrigal's Space</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">EI Madrigal's Space</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://eimadrigal.github.io/2021/10/24/%E5%B1%A0%E9%BE%99%E5%B0%91%E5%B9%B4%20%E9%81%8D%E4%BD%93%E9%B3%9E%E4%BC%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/favicon.png">
      <meta itemprop="name" content="EIMadrigal">
      <meta itemprop="description" content="Hello World">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EI Madrigal's Space">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/24/%E5%B1%A0%E9%BE%99%E5%B0%91%E5%B9%B4%20%E9%81%8D%E4%BD%93%E9%B3%9E%E4%BC%A4/" class="post-title-link" itemprop="url">å± é¾™å°‘å¹´ éä½“é³ä¼¤</a>
        </h2>

        <div class="post-meta">

		  
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-10-24 05:15:00" itemprop="dateCreated datePublished" datetime="2021-10-24T05:15:00+08:00">2021-10-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Life/" itemprop="url" rel="index"><span itemprop="name">Life</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Transform</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/10/24/%E5%B1%A0%E9%BE%99%E5%B0%91%E5%B9%B4%20%E9%81%8D%E4%BD%93%E9%B3%9E%E4%BC%A4/">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://eimadrigal.github.io/2021/10/16/%E7%AC%94%E8%AF%95%E5%90%88%E8%BE%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/favicon.png">
      <meta itemprop="name" content="EIMadrigal">
      <meta itemprop="description" content="Hello World">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EI Madrigal's Space">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/16/%E7%AC%94%E8%AF%95%E5%90%88%E8%BE%91/" class="post-title-link" itemprop="url">ç¬”è¯•åˆè¾‘</a>
        </h2>

        <div class="post-meta">

		  
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-10-16 12:43:00" itemprop="dateCreated datePublished" datetime="2021-10-16T12:43:00+08:00">2021-10-16</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol type="1">
<li><a target="_blank" rel="noopener" href="https://blog.nowcoder.net/n/705b29af83034150830e3c0e9a28e51f">é€æ–‡ä»¶é—®é¢˜</a> é¢˜æ„è¯´äººè¯å°±æ˜¯ï¼šç»™å®šçº¿æ®µ<span class="math inline">\(A_1A_2\)</span>å’Œ<span class="math inline">\(B_1B_2\)</span>ï¼Œå¸Œæœ›ä»<span class="math inline">\(A_1A_2\)</span>å’Œ<span class="math inline">\(B_1B_2\)</span>ä¸Šåˆ†åˆ«æ‰¾ä¸€ä¸ªç‚¹Aå’ŒBï¼Œä½¿å¾—<span class="math inline">\(B_1B+BA&lt;=A_1A\)</span>ã€‚ é¦–å…ˆä¸‰è§’å½¢<span class="math inline">\(B_1BA\)</span>ä¸‰æ¡è¾¹æ»¡è¶³<span class="math inline">\(B_1A&lt;b_1b+ab\)</span>ï¼Œå› æ­¤å¿«é€’å‘˜å¿…ç„¶èµ°ç›´çº¿<span class="math inline">\(ab_1\)</span>ï¼Œå³éœ€è¦<span class="math inline">\(ab_1&lt;=aa_1\)</span>ï¼Œå³<span class="math inline">\(ab_1+aa_2&lt;=aa_1+aa_2=a_1a_2\)</span>ï¼Œåˆåœ¨ä¸‰è§’å½¢<span class="math inline">\(b_1aa_2\)</span>ä¸­ï¼Œ<span class="math inline">\(ab_1+aa_2&gt;B_1A_2\)</span>ï¼Œå› æ­¤å¿«é€’å‘˜å¿…ç„¶é€‰æ‹©èµ°ç›´çº¿<span class="math inline">\(B_1A_2\)</span>ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœ<span class="math inline">\(B_1A_2\)</span>çš„è·ç¦»å°äºç­‰äº<span class="math inline">\(A_1A_2\)</span>çš„è·ç¦»å°±èƒ½æ»¡è¶³ã€‚</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">    x1, y1, x2, y2, x3, y3, x4, y4 = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line">    alice = (x3 - x4) ** <span class="number">2</span> + (y3 - y4) ** <span class="number">2</span></span><br><span class="line">    bob = (x1 - x4) ** <span class="number">2</span> + (y1 - y4) ** <span class="number">2</span></span><br><span class="line">    <span class="keyword">if</span> bob &lt;= alice:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Yes&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;No&quot;</span>)</span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li><a target="_blank" rel="noopener" href="https://blog.nowcoder.net/n/62d4211f496e4939a153536e8e89a3ef">åŠæ ¼é—®é¢˜</a> æˆ‘ç†è§£çš„é¢˜æ„ï¼ˆè¯¯ï¼‰æ˜¯ï¼šå…±æœ‰<span class="math inline">\((n+3)*20\)</span>é“é¢˜ï¼Œåªè¦åšå¯¹<span class="math inline">\((n+3)*12\)</span>é¢˜ä»¥ä¸Šå°±å¯ä»¥åŠæ ¼ï¼Œç„¶åå¦‚ä¸‹ä»£ç è¿æ ·ä¾‹éƒ½è¿‡ä¸äº†ï¼š <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.special <span class="keyword">import</span> comb</span><br><span class="line"></span><br><span class="line">ans = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">72</span>, <span class="number">121</span>):</span><br><span class="line">    ans += comb(<span class="number">120</span>, i, exact=<span class="literal">True</span>) % <span class="number">202220222022</span></span><br><span class="line">    ans %= <span class="number">202220222022</span></span><br><span class="line"><span class="built_in">print</span>(ans)</span><br></pre></td></tr></table></figure></li>
</ol>
<p>DPçš„è¯ï¼šå¦‚æœå°†dp(i,j)å®šä¹‰ä¸ºå‰ié—¨è¯¾è‡³å°‘åšå¯¹jé¢˜çš„ç»„åˆæ•°ï¼Œæœ€ç»ˆçš„ç­”æ¡ˆå°±æ˜¯dp(n+3,12(n+3))ï¼Œä½†è¿™æ ·åé¢çš„çŠ¶æ€è½¬ç§»å¯èƒ½ä¼šæ¯”è¾ƒå¤æ‚ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å°†dp(i,j)å®šä¹‰ä¸ºå‰ié—¨è¯¾åˆšå¥½åšå¯¹jé¢˜çš„ç»„åˆæ•°ï¼Œç­”æ¡ˆå°±æ˜¯dp(n+3,12(n+3))+dp(n+3,12(n+3)+1)+...+dp(n+3,13(n+3))+...+dp(n+3,20(n+3)) å§æ§½ï¼Œå¥½åƒå¼„é”™é¢˜æ„äº†... dp(1,i)=1ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸€é—¨è¯¾é‡Œåšå¯¹å“ªäº›é¢˜æ²¡æœ‰åŒºåˆ«ï¼Œ1é—¨è¯¾åšå¯¹1é¢˜ä¸æ˜¯20ç§æ–¹æ¡ˆï¼Œè€Œæ˜¯1ç§ï¼Œæ‰€ä»¥æ’åˆ—ç»„åˆä¹Ÿå°±ä¸å¯¹äº†ã€‚å”‰ï¼Œæœ€æ€•è¯»é”™é¢˜å•Šï¼ï¼ çŠ¶æ€è½¬ç§»æ–¹ç¨‹dp(i,j)=dp(i-1,0)+dp(i-1,1)+...+dp(i-1,j)ï¼Œå°±æ˜¯è¯´å‰ié—¨è¯¾åˆšå¥½åšå¯¹jé¢˜çš„æ–¹æ¡ˆæ•°å–å†³äºå‰i-1é—¨è¯¾ï¼Œå¦‚æœå‰i-1é—¨è¯¾åšå¯¹0é¢˜ï¼Œé‚£ä¹ˆç¬¬ié—¨å°±å¿…é¡»è¦åšå¯¹jé¢˜ï¼›å¦‚æœå‰i-1é—¨è¯¾åšå¯¹1é¢˜ï¼Œé‚£ä¹ˆç¬¬ié—¨å°±å¿…é¡»è¦åšå¯¹j-1é¢˜... è¿™é‡Œè¦æ³¨æ„ï¼šå› ä¸ºä¸€é—¨è¯¾æœ€å¤šåªèƒ½åšå¯¹20é¢˜ï¼Œæ‰€ä»¥å‰i-1è¯¾åšå¯¹çš„é¢˜æ•°è¦æ»¡è¶³k &gt;= j - 20 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">mod = <span class="number">202220222022</span></span><br><span class="line"></span><br><span class="line">n += <span class="number">3</span></span><br><span class="line">dp = [[<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span> + <span class="number">20</span> * n)] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n + <span class="number">1</span>)]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">21</span>):</span><br><span class="line">    dp[<span class="number">1</span>][i] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, n + <span class="number">1</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i * <span class="number">20</span> + <span class="number">1</span>):</span><br><span class="line">        <span class="comment"># kè¡¨ç¤ºå‰i-1è¯¾åšå¯¹çš„é¢˜æ•°, ç¬¬iè¯¾åšå¯¹çš„é¢˜æ•°&lt;=20, å³å‰i-1è¯¾åšå¯¹çš„é¢˜æ•°k &gt;= j - 20</span></span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(j + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> k &gt;= j - <span class="number">20</span>:</span><br><span class="line">                dp[i][j] += dp[i - <span class="number">1</span>][k]</span><br><span class="line">                dp[i][j] %= mod</span><br><span class="line"></span><br><span class="line">ans = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é”™è¯¯ç¤ºèŒƒ</span></span><br><span class="line"><span class="comment"># for i in range(12, 21):</span></span><br><span class="line">    <span class="comment"># ans += dp[n][i * n] % mod</span></span><br><span class="line">    <span class="comment"># ans %= mod</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">12</span> * n, <span class="number">20</span> * n + <span class="number">1</span>):</span><br><span class="line">    ans += dp[n][i] % mod</span><br><span class="line">    ans %= mod</span><br><span class="line"><span class="built_in">print</span>(ans)</span><br></pre></td></tr></table></figure> 3. <a target="_blank" rel="noopener" href="https://blog.csdn.net/Derrick12/article/details/119712588">ç‰›ç‰›æ–½è‚¥</a> è¿™ç§é¢˜è¦æ³¨æ„å¾ªç¯ä¸å˜æ€§ï¼Œå°±æ˜¯è¯´æ¯ä¸€è¶Ÿæ˜¯å¦è¦åŒ…å«ç¬¬ä¸€è¡Œå’Œæœ€åä¸€è¡Œï¼Œé‡‡ç”¨å·¦é—­å³å¼€ï¼Œè¿™æ ·æ¯ä¸€è¶Ÿéœ€è¦çš„è‚¥æ–™éƒ½æ˜¯å›ºå®šçš„ï¼Œæ¯”è¾ƒå¥½å®ç°è€Œä¸è‡³äºæ·¹æ²¡åœ¨ç»†èŠ‚é‡Œ <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">FarmerNN</span>(<span class="params">self, n, m</span>):</span></span><br><span class="line">        k, b = m // (n - <span class="number">1</span>), m % (n - <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> k % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">            ans = [k] * n</span><br><span class="line">            ans[<span class="number">0</span>], ans[-<span class="number">1</span>] = k // <span class="number">2</span>, k // <span class="number">2</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(b):</span><br><span class="line">                ans[i] += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            ans = [k] * n</span><br><span class="line">            ans[<span class="number">0</span>], ans[-<span class="number">1</span>] = k // <span class="number">2</span> + <span class="number">1</span>, k // <span class="number">2</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n - <span class="number">1</span>, n - <span class="number">1</span> - b, -<span class="number">1</span>):</span><br><span class="line">                ans[i] += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure> &lt;/b_1b+ab<span class="math inline">\(ï¼Œå› æ­¤å¿«é€’å‘˜å¿…ç„¶èµ°ç›´çº¿\)</span>ab_1<span class="math inline">\(ï¼Œå³éœ€è¦\)</span>ab_1&lt;=aa_1<span class="math inline">\(ï¼Œå³\)</span>ab_1+aa_2&lt;=aa_1+aa_2=a_1a_2<span class="math inline">\(ï¼Œåˆåœ¨ä¸‰è§’å½¢\)</span>b_1aa_2<span class="math inline">\(ä¸­ï¼Œ\)</span>ab_1+aa_2&gt;</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://eimadrigal.github.io/2021/09/24/%E6%97%A5%E5%B8%B8%E7%A2%8E%E7%A2%8E%E5%BF%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/favicon.png">
      <meta itemprop="name" content="EIMadrigal">
      <meta itemprop="description" content="Hello World">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EI Madrigal's Space">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/24/%E6%97%A5%E5%B8%B8%E7%A2%8E%E7%A2%8E%E5%BF%B5/" class="post-title-link" itemprop="url">æ—¥å¸¸ç¢ç¢å¿µ</a>
        </h2>

        <div class="post-meta">

		  
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-09-24 14:10:00" itemprop="dateCreated datePublished" datetime="2021-09-24T14:10:00+08:00">2021-09-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Life/" itemprop="url" rel="index"><span itemprop="name">Life</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>write thoughts down</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/09/24/%E6%97%A5%E5%B8%B8%E7%A2%8E%E7%A2%8E%E5%BF%B5/">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://eimadrigal.github.io/2021/09/11/%E4%BB%80%E4%B9%88%E6%98%AF%E6%B1%9F%E6%B9%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/favicon.png">
      <meta itemprop="name" content="EIMadrigal">
      <meta itemprop="description" content="Hello World">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EI Madrigal's Space">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/11/%E4%BB%80%E4%B9%88%E6%98%AF%E6%B1%9F%E6%B9%96/" class="post-title-link" itemprop="url">ä»€ä¹ˆæ˜¯æ±Ÿæ¹–</a>
        </h2>

        <div class="post-meta">

		  
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-09-11 15:24:00" itemprop="dateCreated datePublished" datetime="2021-09-11T15:24:00+08:00">2021-09-11</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Life/" itemprop="url" rel="index"><span itemprop="name">Life</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>ç¢ç¢å¿µ</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/09/11/%E4%BB%80%E4%B9%88%E6%98%AF%E6%B1%9F%E6%B9%96/">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://eimadrigal.github.io/2021/08/30/How%20to%20Make%20Plans/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/favicon.png">
      <meta itemprop="name" content="EIMadrigal">
      <meta itemprop="description" content="Hello World">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EI Madrigal's Space">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/30/How%20to%20Make%20Plans/" class="post-title-link" itemprop="url">How to Make Plans</a>
        </h2>

        <div class="post-meta">

		  
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-08-30 15:09:00" itemprop="dateCreated datePublished" datetime="2021-08-30T15:09:00+08:00">2021-08-30</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>å¦‚ä½•å¹³è¡¡å¥½ç§‘ç ”ã€è‡ªå­¦ã€ç”Ÿæ´»ï¼Ÿè¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„é—®é¢˜ï¼Œå…³ä¹æœªæ¥å‘å±•å’Œç”Ÿæ´»è´¨é‡ï¼Œå¹¶ä¸”éšç€å¹´é¾„å¢é•¿è¿™ä¸ªé—®é¢˜ä¼šå˜å¾—æ›´åŠ ä¸¥é‡ï¼Œå› ä¸ºæˆ‘ä»¬å°†è¦é¢ä¸´çš„ä¸–ç•Œä¼šæ›´åŠ çº·ç¹å¤æ‚ã€‚</p>
<p>è¦å¤„ç†å¥½è¿™ä¸ªé—®é¢˜å¹¶ä¸å®¹æ˜“ï¼Œç”šè‡³æœ‰äº›ç„å­¦ã€æœ‰äº›è‰ºæœ¯ã€‚æˆ‘ä¸ªäººè§‰å¾—è§£å†³è¿™ä¸ªé—®é¢˜çš„å…³é”®åœ¨äºè®¡åˆ’ï¼šåˆ¶å®šåˆç†çš„ã€å¯è¡Œçš„ã€æœ‰ä¾§é‡æ€§çš„ã€ä¸é‚£ä¹ˆæ­»æ¿ã€ä¹Ÿä¸é‚£ä¹ˆæ¾æ•£éšæ„çš„è®¡åˆ’ï¼Œè¿™å…¶ä¸­åŒ…æ‹¬é•¿æœŸè®¡åˆ’ã€ä¸­æœŸè®¡åˆ’å’ŒçŸ­æœŸè®¡åˆ’ï¼Œå¹¶ä¸”è¿˜è¦å­¦ä¼šå·§å¦™åˆ©ç”¨æ—¶é—´ã€‚</p>
<p>æˆ‘è‡ªå·±å°è¯•è¿‡å„ç§å„æ ·çš„è®¡åˆ’ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæŒ‰ç…§æ—¶é—´æ®µä¸¥æ ¼é™å®šä»»åŠ¡ã€æŒ‰ç…§ä»»åŠ¡è¿›å±•æ¾æ•£å‹ã€TODO Listç­‰ï¼ŒåŸºæœ¬éƒ½æ˜¯åšæŒä¸åˆ°2ç¤¼æ‹œå°±åºŸå¼ƒäº†ï¼Œè€Œä¸”ä¹Ÿæ²¡æœ‰è´¯å½»é•¿æœŸå’Œä¸­æœŸè®¡åˆ’ã€‚ <img src="https://img2020.cnblogs.com/blog/1260581/202112/1260581-20211223092219887-1893756805.png" alt="image" /></p>
<p>å¦‚æœçº¯ç²¹æŒ‰ç…§follow your heartå»æ’åºï¼Œé‚£ä¹ˆæ¯«æ— ç–‘é—®æ˜¯ç”Ÿæ´»&gt;è‡ªå­¦&gt;ç§‘ç ”ï¼Œä½†æ˜¯é—®é¢˜åœ¨äºéœ€è¦ä¿è¯ç§‘ç ”çš„æœ€ä½é™åº¦ï¼ˆå®ä¹ åŠæ¯•ä¸šï¼‰ï¼Œæ‰€ä»¥è®¡åˆ’åº”è¯¥æ€ä¹ˆå®šå‘¢ï¼Ÿ</p>
<ol type="1">
<li>é•¿æœŸè®¡åˆ’ï¼ˆ2021.7~2025.7ï¼‰ï¼šæ¯•ä¸šå·¥ä½œä¸¤å¹´ã€‚</li>
<li>ä¸­æœŸè®¡åˆ’ï¼ˆ2021.7~2023.7ï¼‰ï¼š</li>
<li>çŸ­æœŸè®¡åˆ’ï¼ˆæ¯æœˆæ¯å‘¨ï¼‰ï¼š</li>
</ol>
<p>æ ¸å¿ƒé—®é¢˜åœ¨äºï¼šè®¡åˆ’çš„ç›®çš„å¹¶ä¸åœ¨äº100%å®Œæˆï¼Œè¿™å¬èµ·æ¥å¯èƒ½æœ‰äº›è’è°¬ï¼Œè®¡åˆ’çš„çœŸæ­£ç›®çš„åœ¨äºä½¿ä½ æœ‰ä¸€ä¸ªä¸ºä¹‹åŠªåŠ›çš„ä¸œè¥¿ï¼Œå…¨èº«å¿ƒåœ°æŠ•å…¥åˆ°è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œè‡ªç„¶è€Œç„¶æœ€åçš„ç»“æœä¹Ÿä¸ä¼šå¤ªå·®åŠ²ã€‚æ‰€ä»¥TODO Listä¸­çš„äº‹é¡¹æ²¡æœ‰å…¨éƒ¨åˆ’æ‰å¹¶ä¸å¯æ€•ï¼Œå®Œæˆ70%~80%è¶³çŸ£ã€‚å‰©ä¸‹æœªå®Œæˆçš„éƒ¨åˆ†è§†é‡è¦ç¨‹åº¦ä½œä¸ºä¸‹ä¸€é˜¶æ®µçš„é¦–å½“å…¶å†²çš„äº‹é¡¹ã€‚</p>
<p>è¾¾æˆç›®æ ‡æœ¬èº«å¹¶ä¸ä¼šæé«˜å¹¸ç¦æ°´å¹³çš„baselineï¼Œåªæ˜¯è®©è‡ªå·±future-oriented</p>
<h2 id="from-2021.11.23-to-2022.12.31">From 2021.11.23 To 2022.12.31</h2>
<p><strong>è¿™æ®µæ—¶é—´éå¸¸éå¸¸å…³é”®ï¼Œä¼šå†³å®šç¬¬ä¸€ä»½å·¥ä½œçš„å»å‘ï¼ï¼ï¼ç»å¯¹ä¸èƒ½æ¯å¤©æ¯ä¸ªå°æ—¶æµ‘æµ‘å™©å™©</strong></p>
<p>æœ¬è®¡åˆ’åŒ…æ‹¬é˜¶æ®µæ€§ç›®æ ‡å’ŒçŸ­æœŸè®¡åˆ’ä¸¤éƒ¨åˆ†ï¼Œä»åç«¯å¼€å‘ï¼ˆç³»ç»Ÿç¼–ç¨‹/äº‘è®¡ç®—ï¼‰çš„å²—ä½éœ€æ±‚å‡ºå‘è®¾è®¡ç›®æ ‡ï¼š</p>
<p>é˜¶æ®µæ€§ç›®æ ‡ä¸»è¦æ˜¯åœ¨ä»€ä¹ˆæ—¶é—´èŠ‚ç‚¹å®Œæˆä»€ä¹ˆäº‹æƒ…ï¼ŒçŸ­æœŸè®¡åˆ’ä¼šå…·ä½“åˆ°æ¯å¤©ç”šè‡³æ¯ä¸ªå°æ—¶çš„å®‰æ’ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://eimadrigal.github.io/2021/07/28/Inspiring%20Quotes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/favicon.png">
      <meta itemprop="name" content="EIMadrigal">
      <meta itemprop="description" content="Hello World">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EI Madrigal's Space">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/28/Inspiring%20Quotes/" class="post-title-link" itemprop="url">Inspiring Quotes</a>
        </h2>

        <div class="post-meta">

		  
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-07-28 02:57:00" itemprop="dateCreated datePublished" datetime="2021-07-28T02:57:00+08:00">2021-07-28</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol type="1">
<li>è¿˜å·®å¾—è¿œå‘¢ï¼ -ddd æ·±å¤œçœ‹åˆ°dddå¯¹2020å¹´åä¸ºè½¯ä»¶æ¯”èµ›çš„ç²¾å‡†<a target="_blank" rel="noopener" href="https://github.com/justarandomstring/2020-Huawei-Code-Craft">åˆ†æ</a>ï¼Œæ·±æ„Ÿè‡ªå·±å¹³æ—¥å®åœ¨å¤ªè¿‡è½»æ¾ã€‚</li>
<li>å¤©èµ‹æ¸¸æˆï¼Œé¥ä¸å¯åŠã€‚ ä¸€ä½è®¡ç®—æœºåŒå­¦çš„ä¸ªæ€§ç­¾åï¼Œæ·±æ„Ÿè‡ªå·±æ—©å·²ä¸å¯èƒ½æˆä¸ºæœ€é¡¶å°–çš„é‚£æ‰¹äººï¼Œå€Ÿæ­¤æ¥å®½æ…°é‡åˆ°éº»çƒ¦æ—¶çš„çª˜å¢ƒã€‚</li>
<li>æ‰€æœ‰çš„ä¼˜è¶Šæ„Ÿéƒ½æ˜¯å› ä¸ºæ²¡æœ‰è§è¯†ã€‚</li>
<li>æ·±å¤œé‡Œç¢°æ¯ï¼Œéƒ½æ˜¯æ¢¦ç ´ç¢çš„å£°éŸ³ã€‚</li>
<li>I'm tired of all those boring comparisons.</li>
<li>Missing your Vanilla Sky.</li>
<li>æ¶ˆå¤±åœ¨äººæµ·ã€‚</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://eimadrigal.github.io/2021/07/26/767%20Reorganize%20String/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/favicon.png">
      <meta itemprop="name" content="EIMadrigal">
      <meta itemprop="description" content="Hello World">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EI Madrigal's Space">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/26/767%20Reorganize%20String/" class="post-title-link" itemprop="url">767 Reorganize String</a>
        </h2>

        <div class="post-meta">

		  
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-07-26 07:21:00" itemprop="dateCreated datePublished" datetime="2021-07-26T07:21:00+08:00">2021-07-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/reorganize-string/" title="é¢˜ç›®é“¾æ¥">é¢˜ç›®é“¾æ¥</a> ## é¢˜æ„ ç»™å®šå­—ç¬¦ä¸²ï¼Œé‡æ’å…¶ä¸­çš„å­—ç¬¦ä½¿å¾—ä»»æ„ä¸¤ä¸ªç›¸é‚»ä½ç½®çš„å­—æ¯ä¸åŒã€‚ æ ·ä¾‹ï¼šs="aab"ï¼Œè¾“å‡º"aba" ## åˆ†æ æœ€å¼€å§‹çš„æƒ³æ³•æ˜¯è´ªå¿ƒ+åŒæŒ‡é’ˆï¼ŒæŒ‡é’ˆiä»å‰å‘åéå†ï¼ŒæŒ‡é’ˆjä»i+1å¼€å§‹ï¼Œå¦‚æœs[i]==s[j]ï¼Œjä¸æ–­å‘åéå†æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸s[i]ä¸åŒçš„å­—æ¯s[k]ï¼Œå°†s[k]ä¸s[j]äº¤æ¢ã€‚WAåœ¨äº†"baaba"ï¼ŒæœŸå¾…"ababa"ï¼Œè¾“å‡º""ï¼Œæ‰€ä»¥è¿™ç§è´ªå¿ƒç­–ç•¥æ˜¾ç„¶æ˜¯é”™çš„ã€‚</p>
<p>æ¥ç€å°±æƒ³åˆ°éœ€è¦è€ƒè™‘å­—ç¬¦çš„å‡ºç°é¢‘ç‡ï¼Œå…ˆæŒ‰é¢‘ç‡é«˜ä½æ’åºå†å»æŒ‰ç…§ä¸Šè¿°è´ªå¿ƒï¼ŒWAåœ¨äº†"aabbcc"ï¼ŒæœŸå¾…"abacbc"ï¼Œè¾“å‡º""ï¼Œå¾ˆæ˜¾ç„¶è¿™ç§è´ªå¿ƒç­–ç•¥æœ¬èº«å°±æ˜¯é”™çš„ã€‚</p>
<p>æ¥ç€å°±æƒ³åˆ°å…ˆå®‰æ’å‡ºç°æ¬¡æ•°æœ€å¤šçš„ï¼Œå¦‚æœå½“å‰è¦å®‰æ’çš„ä¸å‰ä¸€ä¸ªå­—ç¬¦ç›¸åŒï¼Œå°±é€‰æ‹©å‡ºç°æ¬¡æ•°ç¬¬äºŒå¤šçš„ï¼Œè¿™æ ·äº¤æ›¿ä¸‹å»ï¼Œå¯ä»¥å†™å‡ºå¦‚ä¸‹ä»£ç ï¼š <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">class Solution:</span><br><span class="line">    def reorganizeString(self, s: str) -&gt; str:</span><br><span class="line">        if len(s) == 1:</span><br><span class="line">            return s</span><br><span class="line"></span><br><span class="line">        from collections import Counter</span><br><span class="line">        dic = Counter(s)</span><br><span class="line"></span><br><span class="line">        ans = &quot;&quot;</span><br><span class="line">        prev = &quot;&quot;</span><br><span class="line">        for i in range(0, len(s)):</span><br><span class="line">            cnts = list(dic.items())</span><br><span class="line">            cnts = sorted(cnts, key=lambda x:x[1], reverse=True)</span><br><span class="line">            if prev == cnts[0][0]:</span><br><span class="line">                if len(cnts) &lt;= 1 or cnts[1][1] == 0:</span><br><span class="line">                    return &quot;&quot;</span><br><span class="line">                ans += cnts[1][0]</span><br><span class="line">                dic[cnts[1][0]] -= 1</span><br><span class="line">                prev = cnts[1][0]</span><br><span class="line">            else:</span><br><span class="line">                ans += cnts[0][0]</span><br><span class="line">                dic[cnts[0][0]] -= 1</span><br><span class="line">                prev = cnts[0][0]</span><br><span class="line">        return ans</span><br><span class="line"></span><br></pre></td></tr></table></figure> æ—¶é—´å¤æ‚åº¦<span class="math inline">\(O(n^2lgn)\)</span>ï¼Œç©ºé—´<span class="math inline">\(O(n)\)</span>ã€‚</p>
<p>å› ä¸ºæ¶‰åŠåˆ°å‡ºç°æ¬¡æ•°æœ€å¤šçš„é—®é¢˜ï¼Œå¯ä»¥è€ƒè™‘max heapã€‚æ¯æ¬¡è¿­ä»£æ—¶ï¼Œä»å †é‡Œå¼¹å‡ºå †é¡¶å…ƒç´ ï¼ˆæ„å‘³ç€ä¸‹æ¬¡è¿­ä»£è¯¥å…ƒç´ ä¸ä¼šè€ƒè™‘ï¼‰åŠ å…¥resï¼Œå¦‚æœä¸Šä¸€æ¬¡è¿­ä»£åŠ å…¥resçš„å…ƒç´ è¿˜æœ‰å‰©ä½™ï¼Œå°±å°†å…¶é‡æ–°åŠ å…¥heapï¼Œæ„å‘³ç€ä¸‹æ¬¡è¿­ä»£éœ€è¦è€ƒè™‘è¯¥å…ƒç´ ã€‚ <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class Solution:</span><br><span class="line">    def reorganizeString(self, s: str) -&gt; str:</span><br><span class="line">        ans, cnt = [], Counter(s)  # decent order</span><br><span class="line">        max_heap = [(-value, key) for key, value in cnt.items()]</span><br><span class="line">        heapq.heapify(max_heap)</span><br><span class="line">        prev_ch, prev_cnt = &#x27;&#x27;, 0</span><br><span class="line">        while max_heap:</span><br><span class="line">            cnt, ch = heapq.heappop(max_heap)</span><br><span class="line">            ans.append(ch)</span><br><span class="line">            if prev_cnt &lt; 0:</span><br><span class="line">                heapq.heappush(max_heap, (prev_cnt, prev_ch))</span><br><span class="line">            cnt += 1</span><br><span class="line">            prev_ch, prev_cnt = ch, cnt</span><br><span class="line">        if len(s) != len(ans):</span><br><span class="line">            return &quot;&quot;</span><br><span class="line">        return &#x27;&#x27;.join(ans)</span><br></pre></td></tr></table></figure> æ—¶é—´å¤æ‚åº¦<span class="math inline">\(O(n)\)</span>ï¼Œç©ºé—´<span class="math inline">\(O(n)\)</span>ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://eimadrigal.github.io/2021/07/21/CS231n%20Assignment%20#1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/favicon.png">
      <meta itemprop="name" content="EIMadrigal">
      <meta itemprop="description" content="Hello World">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EI Madrigal's Space">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/21/CS231n%20Assignment%20#1/" class="post-title-link" itemprop="url">CS231n Assignment</a>
        </h2>

        <div class="post-meta">

		  
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-07-21 05:29:00" itemprop="dateCreated datePublished" datetime="2021-07-21T05:29:00+08:00">2021-07-21</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>å…ˆå¹ä¸€æ³¢Google Colabï¼Œæ‰€æœ‰æ“ä½œéƒ½å¯åœ¨äº‘ä¸Šè¿›è¡Œï¼Œè¿˜èƒ½ç™½å«–ğŸ•å®¶çš„GPUï¼›å†å¹ä¸€ä¸‹Stanfordçš„éª¨æ¶ä»£ç ï¼ŒçœŸçš„æ˜¯å¹²å‡€æ•´æ´ä¼˜ç¾ï¼Œå ªç§°å…¸èŒƒã€‚ <a target="_blank" rel="noopener" href="https://github.com/EIMadrigal/CS231n">My Code</a> ## kNN æœ€å¹¼ç¨šçš„æœºå™¨å­¦ä¹ ç®—æ³•ã€‚</p>
<ol type="1">
<li>è®¡ç®—æµ‹è¯•é›†å’Œè®­ç»ƒé›†çš„è·ç¦» è®­ç»ƒé›†<code>X_train</code>çš„shapeä¸º<span class="math inline">\((N, D)\)</span>ï¼Œ<code>y_train</code>çš„shapeä¸º<span class="math inline">\((N,)\)</span>ï¼Œ<code>y[i]</code>å–å€¼èŒƒå›´<span class="math inline">\([0,C-1]\)</span> æµ‹è¯•é›†<code>X_test</code>çš„shapeä¸º<span class="math inline">\((M, D)\)</span>ï¼Œæœ€ç»ˆçš„distance matrixçš„shapeä¸º<span class="math inline">\((M,N)\)</span> å£°æ˜ï¼šä¸èƒ½ä½¿ç”¨ç±»ä¼¼äº<code>np.linalg.norm()</code>è¿™ç§ä¸œè¥¿ä½œå¼Šã€‚ é¦–å…ˆæ¥çœ‹çœ‹2é‡å¾ªç¯ï¼šç¬¬ä¸€é‡éå†æµ‹è¯•é›†ï¼Œç¬¬äºŒé‡éå†è®­ç»ƒé›†ï¼Œå½“ç„¶å¦‚æœä½ æ„¿æ„ï¼Œè¿˜å¯ä»¥ç”¨ç¬¬ä¸‰é‡éå†dimensionå»ç´¯åŠ è·ç¦»ï¼› å†æ¥çœ‹çœ‹åªéå†æµ‹è¯•é›†çš„å•å±‚å¾ªç¯ï¼šå¯¹äºæ¯ä¸ªæµ‹è¯•æ ·ä¾‹<code>X[i]</code>ï¼Œå‡å»<code>X_train</code>ï¼Œé€šè¿‡å¹¿æ’­æœºåˆ¶å¾—åˆ°ä¸€ä¸ª<span class="math inline">\((N, D)\)</span>çš„å·®çŸ©é˜µï¼Œåšelement-wiseçš„å¹³æ–¹ï¼ŒæŒ‰åˆ—ç›¸åŠ å¾—åˆ°<span class="math inline">\((N,)\)</span>ï¼Œè¡¨ç¤ºæµ‹è¯•æ ·ä¾‹<code>X[i]</code>ä¸æ¯ä¸ªè®­ç»ƒæ ·ä¾‹çš„è·ç¦»ï¼Œä½œä¸ºè·ç¦»çŸ©é˜µçš„ç¬¬<span class="math inline">\(i\)</span>è¡Œï¼› æœ€åæ¥çœ‹çœ‹full-vectorizedçš„ç‰ˆæœ¬ï¼Œæ•°å­¦æ¨å¯¼è§<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/146076139">NumPyä¹‹è®¡ç®—ä¸¤ä¸ªçŸ©é˜µçš„æˆå¯¹å¹³æ–¹æ¬§æ°è·ç¦»</a>ï¼Œåƒé¥±æ²¡äº‹å¹²çš„åŒå­¦å¯ä»¥è‡ªå·±æ¨æ¨ï¼Œæˆ‘æ•°å­¦å¤ªå·®å°±æºœäº†ã€‚</li>
<li>æ ¹æ®è·ç¦»çŸ©é˜µé¢„æµ‹æµ‹è¯•é›†çš„æ ‡ç­¾ å¯¹äºæ¯ä¸ªæµ‹è¯•æ ·ä¾‹<code>X[i]</code>ï¼Œé€‰kä¸ªè·ç¦»æœ€å°çš„è®­ç»ƒæ ·ä¾‹ï¼Œå°†å…¶labelï¼ˆä»<code>y_train</code>è·å¾—ï¼‰å­˜å…¥<code>cloest_y</code>ä¸­ï¼ŒæŠ•ç¥¨å†³å®šæœ€ç»ˆçš„é¢„æµ‹æ ‡ç­¾ã€‚ å…ˆç”¨<code>idx=np.argsort(dists[i])[:k]</code>å–å‡ºå‰kä¸ªè®­ç»ƒæ ·ä¾‹çš„indexï¼Œå†ç”¨<code>y_train[idx]</code>å¾—åˆ°å¯¹åº”çš„kä¸ªlabelï¼Œæœ€åç”¨<code>np.argmax(np.bincount(cloest_y))</code>å¾—åˆ°æœ€ç»ˆçš„é¢„æµ‹labelã€‚</li>
</ol>
<p>kNNæ•ˆæœå½“ç„¶æ¯”è¾ƒæ‹‰å®äº†ï¼Œåœ¨CIFAR-10çš„å­é›†ä¸Šåˆ†ç±»æ­£ç¡®ç‡å¤§æ¦‚åœ¨27%å·¦å³ã€‚æ¯”è¾ƒä»¤æˆ‘éœ‡æƒŠçš„æ˜¯ä¸‰ä¸ªè®¡ç®—è·ç¦»å‡½æ•°è€—è´¹çš„æ—¶é—´ï¼Œ2é‡å¾ªç¯57sï¼Œå•å±‚å¾ªç¯41sï¼Œfully-vectorizedåªæœ‰0.57sï¼Œç«Ÿç„¶<strong>é™ä½äº†100å€</strong>ï¼Œå†™å‡ºé«˜æ•ˆçš„ä»£ç å¯¹äºç¨‹åºæ€§èƒ½æœ‰ç€è‡³å…³é‡è¦çš„å½±å“ï¼Œåæ€ä¸‹è‡ªå·±å†™å‡ºçš„junk codeï¼Œä¸ç”±å¾—ç•™ä¸‹äº†ä¼¤å¿ƒçš„æ³ªæ°´...</p>
<p>æœ€åå°±æ˜¯ç”¨cross-validationç¡®å®šè¶…å‚kçš„å–å€¼ï¼Œå°±ç•¥è¿‡äº†å“ˆã€‚ ## Linear Multiclass SVM é¦–å…ˆè¦ä¸ºå¤šåˆ†ç±»SVMå†™ä¸€ä¸ªæŸå¤±å‡½æ•°ï¼Œè€è§„çŸ©è¿˜æ˜¯å…ˆå†™ä¸€ä¸ªnaiveç‰ˆæœ¬<code>svm_loss_naive(W, X, y, reg)</code>ï¼š æƒé‡çŸ©é˜µWï¼š<span class="math inline">\((D, C)\)</span> minibatchè¾“å…¥Xï¼š<span class="math inline">\((N, D)\)</span> æ ‡ç­¾yï¼š<span class="math inline">\((N,)\)</span>ï¼Œ<code>y[i]=c</code>è¡¨ç¤º<code>X[i]</code>çš„æ ‡ç­¾æ˜¯cï¼Œ<span class="math inline">\(0 \leq c&lt;c\)</span> <span class="math display">\[l=&quot;\frac{1}{N}&quot; \]</span>l_i="_{j" +="" -="" )="" ),s_j="f(x_i," ="" ="" _i="" <em>k<em>l="" </em>{j="" f(x_i;="" lossä¸ºï¼š="" losså’Œæ­£åˆ™é¡¹ä¸¤éƒ¨åˆ†ï¼Œå¯¹äºç¬¬<span class="math inline">\(i\)</span>ä¸ªè®­ç»ƒæ ·æœ¬ï¼Œdata="" lossæ˜¯è¿™ä¹ˆå®šä¹‰çš„ï¼š="" machine="" multiclass="" s_j="" s</em>{y_i}="" support="" vector="" w)_j="" w)_j<span class="math display">\[=&quot;&quot; w)_{y_i}=&quot;&quot; w_{k,l}^2\]</span>="" y_i}="" ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ<span class="math inline">\(s\)</span>æ˜¯ç¬¬<span class="math inline">\(i\)</span>ä¸ªè®­ç»ƒæ ·æœ¬çš„å¾—åˆ†å‘é‡<span class="math inline">\((c,)\)</span>ï¼Œ<span class="math inline">\(s_{y_i}\)</span>è¡¨ç¤ºæ­£ç¡®æ ‡ç­¾çš„å¾—åˆ†ï¼Œ<span class="math inline">\(s_j\)</span>è¡¨ç¤ºå…¶ä»–ç±»çš„å¾—åˆ†ã€‚ä¸å¦¨çœ‹çœ‹ä»€ä¹ˆæ—¶å€™æŸå¤±ä¸º0å‘¢ï¼Ÿç¨ä½œå˜å½¢å³æœ‰ï¼šå½“<span class="math inline">\(s_{y_i}-s_j=&quot;&quot; çœ‹ç€æœ‰ç‚¹å¤æ‚å“¦ï¼ä¸»è¦æœ‰data=&quot;&quot; è¿”å›æµ®ç‚¹æ•°`loss`å’Œè§£ææ¢¯åº¦`dw`=&quot;&quot;&gt;\Delta\)</span>æ—¶ï¼Œç¬¬<span class="math inline">\(j\)</span>ç±»æŸå¤±ä¸º0ï¼Œè¯´äººè¯å°±æ˜¯åªæœ‰å½“æ­£ç¡®ç±»çš„å¾—åˆ†å‡å»å…¶ä»–ç±»çš„å¾—åˆ†å¤§äºæŸä¸ªé—´éš”<span class="math inline">\(\Delta\)</span>æ—¶æ‰ä¸ä¼šç´¯ç§¯æŸå¤±ï¼Œå¦åˆ™å°±ç´¯åŠ æŸå¤±ï¼ˆå¿…ç„¶ä¸ºæ­£æ•°ï¼‰ï¼Œè¿™å°±æ˜¯å¤§åé¼é¼çš„<strong>Hinge Loss</strong>ã€‚</p>
<p>å¦‚æœ<span class="math inline">\(f\)</span>ç”¨çš„æ˜¯linear score functionï¼Œè¿›ä¸€æ­¥æœ‰ï¼š <span class="math display">\[L_i = \sum_{j\neq y_i} \max(0, w_j^T x_i - w_{y_i}^T x_i + \Delta)\]</span> å…¶ä¸­ï¼Œ<span class="math inline">\(w_j\)</span>è¡¨ç¤ºWçš„ç¬¬<span class="math inline">\(j\)</span>åˆ—ã€‚ è‡³æ­¤ï¼Œnaiveç‰ˆæœ¬çš„<code>loss</code>å®ç°å°±ä¸å¿…åºŸè¯äº†ã€‚æ¥ç€æ¥æ±‚<code>dW</code>ï¼Œè€è§„çŸ©ï¼Œè¿˜æ˜¯å…ˆç ”ç©¶å•ä¸ªæ ·æœ¬ã€‚</p>
<p>å¦‚æœä½ çš„æ•°å­¦è¿˜è¡Œï¼Œä¸‹é¢çš„æ¢¯åº¦æ¨å¯¼å¯ä»¥ç•¥è¿‡ï¼š <span class="math display">\[L_i = max(0,w_1^T x_i - w_{y_i}^T x_i + \Delta)+max(0,w_2^T x_i - w_{y_i}^T x_i + \Delta)+...+max(0,w_C^T x_i - w_{y_i}^T x_i + \Delta)\]</span> å…±æœ‰<span class="math inline">\(C-1\)</span>é¡¹ï¼Œå› ä¸º<span class="math inline">\(j=y_i\)</span>é‚£é¡¹ä¸ç®—ã€‚å¦ï¼Œåªæœ‰åœ¨<span class="math inline">\(w_j^T x_i - w_{y_i}^T x_i + \Delta&gt;0\)</span>æ—¶ç¬¬<span class="math inline">\(j\)</span>é¡¹çš„æ¢¯åº¦ä¸ä¸º0ã€‚</p>
<ol type="1">
<li>å¯¹<span class="math inline">\(w_{y_i}\)</span>çš„æ¢¯åº¦ æ¯é¡¹éƒ½æœ‰ï¼Œå¹¶ä¸”éƒ½æ˜¯0æˆ–<span class="math inline">\(-x_i\)</span>ï¼Œå› æ­¤åªè¦çœ‹å‡ é¡¹å¤§äº0ï¼Œæ¢¯åº¦å°±æ˜¯å‡ å€çš„<span class="math inline">\(-x_i\)</span>ï¼Œæ­£å¼ç‚¹å°±æ˜¯ï¼š <span class="math display">\[\nabla_{w_{y_i}} L_i = - \left( \sum_{j\neq y_i} \mathbb{1}(w_j^Tx_i - w_{y_i}^Tx_i + \Delta &gt; 0) \right) x_i\]</span></li>
<li>å¯¹<span class="math inline">\(w_j\)</span>çš„æ¢¯åº¦ åªæœ‰ç¬¬<span class="math inline">\(j\)</span>é¡¹æœ‰ï¼Œ0æˆ–<span class="math inline">\(x_i\)</span>ï¼Œæ­£å¼ç‚¹å°±æ˜¯ï¼š <span class="math display">\[\nabla_{w_j} L_i = \mathbb{1}(w_j^Tx_i - w_{y_i}^Tx_i + \Delta &gt; 0) x_i\]</span></li>
</ol>
<p>naiveç‰ˆæœ¬çš„<code>dW[:,j]</code>å’Œ<code>dW[:,y[i]]</code>å°±2é‡å¾ªç¯æŒ‰éƒ¨å°±ç­æ›´æ–°å³å¯ï¼Œåˆ«å¿˜äº†é™¤ä»¥<span class="math inline">\(N\)</span>å’Œæ­£åˆ™é¡¹æ¢¯åº¦ã€‚</p>
<p>æ¥ç€æ¥å®ç°<code>svm_loss_vectorized(W, X, y, reg)</code>ï¼š</p>
<ol type="1">
<li>loss é¦–å…ˆæ±‚å¾—æ•´ä¸ªè®­ç»ƒé›†çš„å¾—åˆ†çŸ©é˜µ<code>scores</code>ï¼Œshapeä¸º<span class="math inline">\((N,C)\)</span>ï¼Œæ¯ä¸€è¡Œè¡¨ç¤ºä¸€ä¸ªæ ·ä¾‹çš„å¾—åˆ†ã€‚æ­£ç¡®ç±»å¾—åˆ†å‘é‡<code>correct_class_score</code>å¯ç”¨<code>scores[np.arange(num_train), y]</code>å¾—åˆ°ï¼Œshapeä¸º<span class="math inline">\((N,)\)</span>ï¼Œæ³¨æ„è¿™é‡Œä¸èƒ½ç”¨<code>scores[:, y]</code>ï¼Œç®€å•è¯•éªŒä¸‹ï¼š</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">X = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]])</span><br><span class="line">y = np.array([<span class="number">2</span>, <span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(X[np.arange(<span class="number">2</span>), y])  <span class="comment"># [3,4]</span></span><br><span class="line"><span class="built_in">print</span>(X[:, y])  <span class="comment"># [[3,2],[5,4]]</span></span><br></pre></td></tr></table></figure>
<p>ä¸‹æ¥åˆ°äº†æœ€å…³é”®çš„<code>margins</code>çŸ©é˜µï¼Œè¯¥çŸ©é˜µå’Œ<code>scores</code>çŸ©é˜µshapeç›¸åŒ<span class="math inline">\((N,C)\)</span>ï¼Œç¬¬<span class="math inline">\(i\)</span>è¡Œè¡¨ç¤ºç¬¬<span class="math inline">\(i\)</span>ä¸ªè®­ç»ƒæ ·æœ¬çš„marginå³<span class="math inline">\(max(0,s_j - s_{y_i} + \Delta)\)</span>ï¼Œåœ¨æ¯ä¸€è¡Œç¬¬<span class="math inline">\(y_i\)</span>ä¸ªä½ç½®ä¸Šåº”å½“è®¾ç½®ä¸º0ï¼Œå…¶ä½™ä½ç½®æŒ‰ç…§å…¬å¼å³å¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">margins = np.maximum(<span class="number">0</span>, scores - correct_class_score[:, np.newaxis] + <span class="number">1</span>)</span><br><span class="line">margins[np.arange(num_train), y] = <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„ï¼š<code>correct_class_score</code>æ˜¯ä¸€ä¸ª<span class="math inline">\((N,)\)</span>çš„å‘é‡ï¼Œå¦‚æœç›´æ¥<code>scores-correct_class_score</code>å°±ä¼šæŠ¥é”™ï¼Œå¹¿æ’­æœºåˆ¶ä»æœ€åä¸€ä¸ªç»´åº¦å¼€å§‹æ¯”å¯¹ï¼Œåªæœ‰ç›¸ç­‰æˆ–è€…å…¶ä¸­æŸä¸ªä¸º1æ‰è¡Œï¼Œå› æ­¤ç”¨<code>np.newaxis</code>å°†<code>correct_class_score</code>çš„shapeå˜ä¸º<span class="math inline">\((N,1)\)</span>ï¼›è¿˜æœ‰å°±æ˜¯<code>np.max()</code>å’Œ<code>np.maximum()</code>çš„åŒºåˆ«ï¼Œ<code>np.max()</code>å’Œ<code>np.amax(a, axis=None, ...)</code>ç­‰ä»·ï¼Œè¿”å›æ•°ç»„çš„æœ€å¤§å€¼ï¼Œ<code>np.maximum(x1, x2, out=None, ...)</code>è¿”å›element-wiseçš„è¾ƒå¤§å€¼ã€‚</p>
<ol start="2" type="1">
<li>æ¢¯åº¦ è¿™é‡Œä¹Ÿç¨å¾®æœ‰ç‚¹trickyï¼Œæ ¹æ®naiveç‰ˆæœ¬å¯¹æ¢¯åº¦çš„è®¨è®ºï¼šå¯¹<span class="math inline">\(w_j\)</span>çš„æ¢¯åº¦éœ€è¦çŸ¥é“marginçš„æ­£è´Ÿï¼Œå¯¹<span class="math inline">\(w_{y_i}\)</span>çš„æ¢¯åº¦éœ€è¦çŸ¥é“<strong>æœ‰å‡ é¡¹å¤§äº0</strong>ã€‚æ€ä¹ˆå€ŸåŠ©<code>margins</code>çŸ©é˜µç»Ÿè®¡æ¯ä¸€è¡Œå¤§äº0çš„é¡¹æ•°å‘¢ï¼Ÿæ— èŠçš„ç¨‹åºå‘˜å…ˆå°†çŸ©é˜µä¸­å¤§äº0çš„é¡¹éƒ½è®¾ä¸º1ï¼Œç„¶åæŒ‰åˆ—ç›¸åŠ å³å¯ï¼š</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">margins[margins &gt; <span class="number">0</span>] = <span class="number">1.0</span></span><br><span class="line">num_to_loss = np.<span class="built_in">sum</span>(margins, axis=<span class="number">1</span>)  <span class="comment"># (N,)</span></span><br><span class="line">margins[np.arange(num_train, y)] = -num_to_loss</span><br></pre></td></tr></table></figure>
<p>å¯¹å•ä¸ªæ ·æœ¬<span class="math inline">\(i\)</span>æ¥è¯´ï¼Œå…¶å¯¹<code>dW</code>çš„è´¡çŒ®è¦ä¹ˆæ˜¯åœ¨ç¬¬<span class="math inline">\(j\)</span>åˆ—ï¼ˆå³ç¬¬<span class="math inline">\(j\)</span>ä¸ªç±»ï¼‰åŠ ä¸Š<span class="math inline">\(x_i\)</span>ï¼Œè¦ä¹ˆåœ¨ç¬¬<span class="math inline">\(y_i\)</span>åˆ—åŠ ä¸Š<span class="math inline">\(-kx_i\)</span>ï¼Œ<span class="math inline">\(k\)</span>ä¸º<code>margins[i]</code>ä¸­å¤§äº0çš„å…ƒç´ ä¸ªæ•°ï¼Œå³<code>num_to_loss[i]</code>ï¼Œæ•´ä¸ªè®­ç»ƒé›†å¯¹<code>dW</code>çš„æ›´æ–°å³æ˜¯åœ¨ç´¯åŠ å•ä¸ªæ ·æœ¬å¯¹<code>dW</code>æ¯ä¸€åˆ—ï¼ˆæ¯ä¸ªç±»ï¼‰çš„å½±å“ã€‚å¯¹ç¬¬<span class="math inline">\(j\)</span>åˆ—ï¼Œå…¶æ›´æ–°å³ä¸ºæ¯ä¸ªè®­ç»ƒæ ·æœ¬å¯¹è¯¥ç±»è´¡çŒ®çš„çº¿æ€§ç»„åˆï¼Œç»„åˆç³»æ•°å–å†³äºè¯¥æ ·æœ¬çš„æ ‡ç­¾ä»¥åŠæ˜¯å¦æ»¡è¶³æŒ‡ç¤ºå‡½æ•°ï¼Œå³ä¸º<code>margins</code>çš„ç¬¬<span class="math inline">\(j\)</span>åˆ—ï¼Œå–å€¼èŒƒå›´<span class="math inline">\(\{0,1,-k\}\)</span>ï¼Œ0è¡¨ç¤ºè¯¥æ ·æœ¬å¯¹ç¬¬<span class="math inline">\(j\)</span>ä¸ªç±»çš„æ¢¯åº¦æ²¡æœ‰è´¡çŒ®ï¼ˆè¯¥æ ·æœ¬æ ‡ç­¾ä¸æ˜¯<span class="math inline">\(j\)</span>ä¸”ä¸æ»¡è¶³æŒ‡ç¤ºå‡½æ•°ï¼‰ï¼Œ1è¡¨ç¤ºè´¡çŒ®äº†<span class="math inline">\(x_i\)</span>ï¼ˆè¯¥æ ·æœ¬æ ‡ç­¾ä¸æ˜¯<span class="math inline">\(j\)</span>ä¸”æ»¡è¶³æŒ‡ç¤ºå‡½æ•°ï¼‰ï¼Œ<span class="math inline">\(-k\)</span>è¡¨ç¤ºè´¡çŒ®äº†<span class="math inline">\(-kx_i\)</span>ï¼ˆè¯¥æ ·æœ¬çš„æ ‡ç­¾å°±æ˜¯<span class="math inline">\(j\)</span>ï¼‰ï¼Œå› æ­¤ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dW = np.dot(X.T, margins) / num_train + <span class="number">2</span> * reg * W</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ä»çŸ©é˜µç»´åº¦ç›¸å®¹çš„è§’åº¦éªŒè¯ã€‚ ## Softmax å…ˆç”¨å¾ªç¯å®ç°ä¸€ä¸ª<code>softmax_loss_naive(W, X, y, reg)</code>ï¼Œè¾“å…¥çš„shapeå’ŒSVMç›¸åŒã€‚ softmaxåˆ†ç±»å™¨ä¸å†å°†<span class="math inline">\(f(x_i;W)\)</span>çœ‹åšæ¯ä¸ªç±»çš„å¾—åˆ†ï¼Œè€Œæ˜¯å¸Œæœ›è¾“å‡ºnormalized class probabilitiesï¼Œæœ€ç»ˆé€‰ä¸€ä¸ªæ¦‚ç‡æœ€å¤§çš„ç±»ä½œä¸ºé¢„æµ‹ï¼Œ<strong>softmaxå‡½æ•°</strong>å°±èƒ½å°†<span class="math inline">\(f(x_i;W)\)</span>æ˜ å°„åˆ°<span class="math inline">\([0,1]\)</span>ä¸”æ»¡è¶³æ¦‚ç‡çš„æ€§è´¨ï¼š <span class="math display">\[P(y_i \mid x_i; W) = \frac{e^{f_{y_i}}}{\sum_j e^{f_j} }\]</span> ä»é¢„æµ‹å‡½æ•°å¯ä»¥çœ‹åˆ°ï¼šsoftmaxæ˜¯æŠŠ<span class="math inline">\(f(x_i;W)\)</span>çœ‹ä½œunnormalized log probabilitiesï¼Œå› æ­¤å¯¹<span class="math inline">\(f(x_i;W)\)</span>å…ˆæŒ‡æ•°å†å½’ä¸€åŒ–å¾—åˆ°æ¯ä¸ªç±»çš„æ¦‚ç‡ã€‚</p>
<p>å†æ¥çœ‹softmaxçš„æŸå¤±å‡½æ•°ï¼š <span class="math display">\[L_i = -\log\left(\frac{e^{f_{y_i}}}{ \sum_j e^{f_j} }\right) \hspace{0.1in} \text{or equivalently} \hspace{0.1in} L_i = -f_{y_i} + \log\sum_j e^{f_j}\]</span> ä»ç›´è§‰ä¸Šè¯´ï¼šå±äºæ­£ç¡®ç±»<span class="math inline">\(y_i\)</span>çš„æ¦‚ç‡ï¼ˆæ‹¬å·é‡Œçš„åˆ†å¼ï¼‰è¶Šé«˜ï¼ŒæŸå¤±åº”è¯¥è¶Šå°ï¼Œè¿™å°±æ˜¯å¤§åé¼é¼çš„<strong>cross-entropy loss</strong>ï¼Œè¡¡é‡äº†çœŸå®åˆ†å¸ƒ<span class="math inline">\(p\)</span>å’Œé¢„æµ‹åˆ†å¸ƒ<span class="math inline">\(q\)</span>ä¹‹é—´çš„å·®è·ï¼š <span class="math display">\[H(p,q) = - \sum_x p(x) \log q(x)= H(p) + D_{KL}(p||q)\]</span> å…·ä½“åˆ°softmaxï¼š <span class="math display">\[q=\frac{e^{f_{y_i}}}{ \sum_j e^{f_j} },p = [0, \ldots 1, \ldots, 0]\]</span> å…¶ä¸­ï¼Œ<span class="math inline">\(p\)</span>åœ¨ç¬¬<span class="math inline">\(y_i\)</span>ä¸ªä½ç½®ä¸Šä¸º1ã€‚ ç”±äº<span class="math inline">\(H(p)=0\)</span>ï¼Œå› æ­¤å…¶å®æ˜¯åœ¨æœ€å°åŒ–<span class="math inline">\(p\)</span>å’Œ<span class="math inline">\(q\)</span>çš„KLæ•£åº¦ï¼Œå³å¸Œæœ›é¢„æµ‹ç»“æœ<span class="math inline">\(q\)</span>å°½é‡å‘<span class="math inline">\(p\)</span>é è¿‘ã€‚</p>
<p>ä»æ¦‚ç‡çš„è§’åº¦å‡ºå‘çœ‹æŸå¤±å‡½æ•°ï¼Œæˆ‘ä»¬æ˜¯åœ¨æœ€å°åŒ–æ­£ç¡®ç±»<span class="math inline">\(y_i\)</span>çš„è´Ÿå¯¹æ•°ä¼¼ç„¶ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯åœ¨åšä¸€ä¸ªæå¤§ä¼¼ç„¶ä¼°è®¡ã€‚</p>
<p>çœ‹å®Œç†è®ºï¼Œè¿˜è¦è€ƒè™‘ä¸€äº›ç°å®é—®é¢˜ã€‚æ¯”å¦‚æ•°å€¼ç¨³å®šæ€§ï¼Œç”±äºæŒ‡æ•°çš„åŸå› å¯èƒ½ä¼šå¯¼è‡´overflowæˆ–è€…underflowï¼Œå› æ­¤åšä¸€ä¸ªç®€å•çš„ç­‰ä»·å˜æ¢ï¼š <span class="math display">\[\frac{e^{f_{y_i}}}{\sum_j e^{f_j}}
= \frac{Ce^{f_{y_i}}}{C\sum_j e^{f_j}}
= \frac{e^{f_{y_i} + \log C}}{\sum_j e^{f_j + \log C}}\]</span> ä¸€èˆ¬é€‰<span class="math inline">\(\log C = -\max_j f_j\)</span>ï¼Œè¿™ä¸ªå˜æ¢ä¸ä¼šæ”¹å˜é¢„æµ‹å‡½æ•°æˆ–è€…æŸå¤±å‡½æ•°ï¼Œåªæ˜¯å°†å¾—åˆ†åšäº†å¹³ç§»ã€‚</p>
<p>è‡³æ­¤ï¼Œnaiveç‰ˆæœ¬çš„losså°±åŸºæœ¬æœ‰äº†ï¼Œæ¥ç€çœ‹çœ‹æ¢¯åº¦å’‹æ±‚ã€‚å…ˆç¨ç¨å±•å¼€åº·åº·ï¼š <span class="math display">\[L_i=-f_{y_i} + \log\sum_j e^{f_j}=-w_{y_i}^Tx_i+log\sum_je^{w_j^Tx_i}\]</span> å…¶ä¸­ï¼Œ<span class="math inline">\(w_j\)</span>è¡¨ç¤ºWçš„ç¬¬<span class="math inline">\(j\)</span>åˆ—ã€‚ ç„¶åä½¿ç”¨æˆ‘ä»¬çš„å°å­¦æ•°å­¦çŸ¥è¯†å»æ±‚åå¯¼ï¼š <span class="math display">\[\nabla_{w_{y_i}} L_i =(\frac{e^{f_{y_i}}}{ \sum_j e^{f_j}}-1)x_i \\
\nabla_{w_j} L_i = \frac{e^{f_{j}}}{ \sum_j e^{f_j}}x_i\]</span> è®°<code>p = np.exp(scores) / np.sum(np.exp(scores))</code>ï¼Œshapeä¸º<span class="math inline">\((C,)\)</span>ï¼Œè¡¨ç¤ºæ ·æœ¬<span class="math inline">\(i\)</span>å±äºæ¯ä¸ªç±»çš„æ¦‚ç‡ã€‚ æ‰€ä»¥<code>dW</code>çš„ç¬¬<code>y[i]</code>åˆ—æ›´æ–°å³ä¸º<code>(p[y[i]] - 1) * X[i]</code>ï¼Œå…¶ä»–åˆ—æ›´æ–°ä¸º<code>p[j] * X[i]</code>ã€‚</p>
<p>æ¥ç€çœ‹ä¸‹vectorizedç‰ˆæœ¬ï¼Œ<code>scores</code>çš„shapeå˜ä¸ºäº†<span class="math inline">\((N,C)\)</span>ï¼Œé¦–å…ˆå¤„ç†æ•°å€¼ç¨³å®šæ€§é—®é¢˜ï¼Œæ¯ä¸€è¡Œéƒ½å‡å»è¯¥è¡Œçš„æœ€å¤§å€¼ï¼ˆæ³¨æ„<code>keepdim=True</code>ï¼‰ï¼›æ¥ç€æ±‚å‡ºæ¦‚ç‡çŸ©é˜µ<code>p</code>ï¼Œshapeä¸<code>scores</code>ç›¸åŒï¼Œé‚£ä¹ˆlossä¸ºï¼š <code>loss = np.sum(-np.log(p[np.arange(X.shape[0]), y])) / X.shape[0]</code> ä¸SVMç±»ä¼¼ï¼Œ<code>dW</code>çš„æ¯ä¸€åˆ—ï¼ˆæ¯ä¸ªç±»ï¼‰æ˜¯ç”±æ¯ä¸ªè®­ç»ƒæ ·æœ¬å½±å“çš„çº¿æ€§ç»„åˆå†³å®šçš„ï¼Œç»„åˆç³»æ•°å–å†³äºè¯¥è®­ç»ƒæ ·ä¾‹çš„æ ‡ç­¾ï¼Œæ¯”å¦‚å¯¹äº<code>dW</code>çš„ç¬¬<span class="math inline">\(j\)</span>ä¸ªç±»æ¥è¯´ï¼Œå¦‚æœæŸä¸ªæ ·ä¾‹çš„æ ‡ç­¾æ°å¥½æ˜¯<span class="math inline">\(j\)</span>ï¼Œé‚£ä¹ˆå…¶å¯¹æ¢¯åº¦çš„è´¡çŒ®å°±æ˜¯<code>p[j]-1</code>ï¼Œå¦åˆ™ç³»æ•°å°±æ˜¯<code>p[j]</code>ã€‚å› æ­¤åªè¦å°†æ¦‚ç‡çŸ©é˜µ<code>p</code>ä¸­æ‰€æœ‰æ­£ç¡®æ ‡ç­¾çš„å€¼å‡1å³å¾—åˆ°ç³»æ•°çŸ©é˜µï¼Œè¿›è€Œå¾—åˆ°<code>dW</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p[np.arange(X.shape[<span class="number">0</span>]), y] = p[np.arange(X.shape[<span class="number">0</span>]), y] - <span class="number">1</span></span><br><span class="line">dW = np.dot(X.T, p)</span><br></pre></td></tr></table></figure>
<p>åŒæ ·å¯ä»¥ç”¨ç»´åº¦ç›¸å®¹å»checkã€‚ ## Neural Network è¿™æ˜¯ä¸€ä¸ªä¸¤å±‚çš„å…¨è¿æ¥ç¥ç»ç½‘ç»œï¼Œæ¶æ„å¦‚ä¸‹ï¼š è¾“å…¥<span class="math inline">\((N,D)\)</span>-&gt;å…¨è¿æ¥å±‚1-&gt;ReLU-&gt;å…¨è¿æ¥å±‚2ï¼ˆè¾“å‡ºæ¯ä¸ªç±»çš„å¾—åˆ†ï¼‰-&gt;softmax å‚æ•°ä»¬çš„shapeä¸ºï¼š<span class="math inline">\(X(N,D),W1(D,H),b1(H,),W2(H,C),b2(C,)\)</span></p>
<p>ç¬¬ä¸€æ­¥Forward Passï¼Œæ ¹æ®è¾“å…¥Xå’Œæƒå€¼Wè®¡ç®—<span class="math inline">\(scores(N,C)\)</span>ï¼Œç„¶åè®¡ç®—softmax lossï¼› ç¬¬äºŒæ­¥Backward Passï¼Œéœ€è¦è®¡ç®—losså¯¹äºå‚æ•°ä»¬çš„æ¢¯åº¦ï¼Œæ ¹æ®ç½‘ç»œç»“æ„ï¼š <span class="math display">\[h=XW1+b1\\
o=ReLU(h)\\
s=oW2+b2\\
L=\sum_i(-s_{y_i}+log\sum_j e^{s_j})\]</span> æ ¹æ®é“¾å¼æ³•åˆ™+ç»´åº¦ç›¸å®¹ï¼š <span class="math display">\[\nabla_{w_2} L =o^T \nabla_{s} L\\
\nabla_{b_2} L =(\nabla_{s} L)^T(\nabla_{b_2} s)=(C,N)(N,1)=(C,N)(all\ 1\ col)\\
\nabla_{w_1} L =X^T \nabla_{s} L\nabla_{h} s\\
\nabla_{b_1} L =\nabla_{h} s (\nabla_{s} L)^T\nabla_{b_1} h=(H,C)(C,N)(N,1)=(H,C)(C,N)(all\ 1\ col)\]</span> å¯ä»¥çœ‹å‡ºï¼šå…³é”®åœ¨äºæ±‚å‡º<span class="math inline">\(\nabla_{s} L\)</span>ï¼Œåœ¨å¯¹softmaxçš„è®¨è®ºä¸­å¯çŸ¥ï¼Œå¯¹äºç¬¬<span class="math inline">\(y_i\)</span>åˆ—å¯¼æ•°ä¸º<code>p[y[i]]-1</code>ï¼Œå¯¹å…¶ä»–åˆ—ä¸º<code>p[j]</code>ï¼Œå› æ­¤è¯¥åå¯¼ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">d2 = p</span><br><span class="line">d2[np.arange(X.shape[<span class="number">0</span>]), y] -= <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>å¦å¤–å¯¹äº<span class="math inline">\(W_1,b_1\)</span>ï¼Œè¿˜éœ€è¦<span class="math inline">\(\nabla_{h} s\)</span>ï¼šè¿™ç©æ„åœ¨<span class="math inline">\(h&gt;0\)</span>å°±æ˜¯<span class="math inline">\(W_2^T\)</span>ï¼Œå¦åˆ™å°±æ˜¯0ã€‚å› æ­¤<span class="math inline">\(\nabla_{s} L\nabla_{h} s\)</span>å¯ä»¥å†™ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d1 = d2.dot(W2.T) * (h &gt; <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h2 id="image-features">Image Features</h2>
<p>ä¹‹å‰çš„æ ·ä¾‹éƒ½æ˜¯ç›´æ¥ç”¨raw pixelï¼ŒåŠ ä¸Šéƒ½æ˜¯çº¿æ€§æ¨¡å‹ï¼Œæ•ˆæœæ‹‰è·¨å¤ªæ­£å¸¸äº†ã€‚è¿™é‡Œç”¨çš„äººå·¥featureåŒ…æ‹¬HOG(Histogram of Oriented Gradients)å’Œcolor histogramï¼ŒHOGæ•æ‰textureï¼ˆçº¹ç†å˜åŒ–ï¼Ÿï¼‰ä¿¡æ¯ï¼Œcolor histogramæ•æ‰é¢œè‰²ä¿¡æ¯ï¼Œä¸¤è€…äº’ç›¸è¾…åŠ©ã€‚&lt;/c$&gt;</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://eimadrigal.github.io/2021/07/17/1171%20Remove%20Zero%20Sum%20Consecutive%20Nodes%20from%20Linked%20List/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/favicon.png">
      <meta itemprop="name" content="EIMadrigal">
      <meta itemprop="description" content="Hello World">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EI Madrigal's Space">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/17/1171%20Remove%20Zero%20Sum%20Consecutive%20Nodes%20from%20Linked%20List/" class="post-title-link" itemprop="url">1171 Remove Zero Sum Consecutive Nodes from Linked List</a>
        </h2>

        <div class="post-meta">

		  
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-07-17 06:50:00" itemprop="dateCreated datePublished" datetime="2021-07-17T06:50:00+08:00">2021-07-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/remove-zero-sum-consecutive-nodes-from-linked-list/">é¢˜ç›®é“¾æ¥</a> ## é¢˜æ„ ç»™å®šä¸€ä¸ªå•é“¾è¡¨ï¼Œåˆ é™¤å’Œä¸º0çš„è¿ç»­ç»“ç‚¹åºåˆ—ï¼Œç›´åˆ°æœ€ç»ˆé“¾è¡¨ä¸­æ²¡æœ‰å’Œä¸º0çš„è¿ç»­ç»“ç‚¹åºåˆ—ã€‚ æ ·ä¾‹ï¼šhead = [1,2,3,-3,-2]ï¼Œè¾“å‡º[1] ## åˆ†æ ç”±äºé“¾è¡¨å¤´ç»“ç‚¹å¯èƒ½ä¼šè¢«åˆ é™¤ï¼Œå› æ­¤é¦–å…ˆåˆ›å»ºdummyç»“ç‚¹ã€‚ä¸€ä¸ªæ¯”è¾ƒç›´è§‚çš„æƒ³æ³•å°±æ˜¯è®°å½•å‰ç¼€å’Œï¼Œä¾æ¬¡éå†é“¾è¡¨ï¼Œé‡åˆ°å‡ºç°è¿‡çš„å‰ç¼€å’Œä¹Ÿå°±æ„å‘³ç€å‡ºç°äº†å’Œä¸º0çš„åºåˆ—ï¼Œå°±åˆ é™¤ä¸¤æ¬¡ç›¸åŒå‰ç¼€å’Œä¸­é—´çš„åºåˆ—ã€‚å› æ­¤éœ€è¦ä¸€ä¸ªhashtableè®°å½•å‰ç¼€å’Œå‡ºç°çš„ä½ç½®ï¼Œæ‰‹åŠ¨èµ°ä¸€ä¸ªç®€å•æ ·ä¾‹å§ï¼š dummyè®¾ä¸º<code>(0,head)</code>ï¼Œhashtableåˆå§‹åŒ…å«<code>&#123;0:dummy&#125;</code>ï¼Œé¿å…[1,-1]è¿™ç§æƒ…å†µã€‚</p>
<ol type="1">
<li><code>cur=p(1),sum=1,hash=&#123;0:dummy,1:p(1)&#125;</code></li>
<li><code>cur=p(2),sum=3,hash=&#123;0:dummy,1:p(1),3:p(2)&#125;</code></li>
<li><code>cur=p(3),sum=6,hash=&#123;0:dummy,1:p(1),3:p(2),6:p(3)&#125;</code></li>
<li><code>cur=p(-3),sum=3</code>ï¼šæ­¤æ—¶hashè¿”å›p(2)ï¼Œå› æ­¤å°±è®©p(2).nextæŒ‡å‘cur.nextï¼Œç›¸å½“äºåˆ é™¤äº†[3,-3]ï¼Œ<code>hash=&#123;0:dummy,1:p(1),3:p(2),6:p(3)&#125;</code></li>
<li><code>cur=p(-2),sum=1</code>ï¼šæ­¤æ—¶hashè¿”å›p(1)ï¼Œå› æ­¤è®©p(1).nextæŒ‡å‘cur.nextï¼Œç›¸å½“äºåˆ é™¤äº†[2,-2]ï¼Œ<code>hash=&#123;0:dummy,1:p(1),3:p(2),6:p(3)&#125;</code></li>
</ol>
<p>å¤§æ¦‚å¯ä»¥å†™å‡ºè¿™æ ·çš„ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"># class ListNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, val=0, next=None):</span></span><br><span class="line"><span class="comment">#         self.val = val</span></span><br><span class="line"><span class="comment">#         self.next = next</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">removeZeroSumSublists</span>(<span class="params">self, head: ListNode</span>) -&gt; ListNode:</span></span><br><span class="line">        dummy = ListNode(<span class="built_in">next</span>=head)</span><br><span class="line">        cur = head</span><br><span class="line">        prefix_sum = <span class="number">0</span></span><br><span class="line">        hashtable = &#123;<span class="number">0</span>:dummy&#125;</span><br><span class="line">        <span class="keyword">while</span> cur:</span><br><span class="line">            prefix_sum += cur.val</span><br><span class="line">            p = hashtable.get(prefix_sum)</span><br><span class="line">            <span class="keyword">if</span> p:</span><br><span class="line">                p.<span class="built_in">next</span> = cur.<span class="built_in">next</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                hashtable[prefix_sum] = cur</span><br><span class="line">            cur = cur.<span class="built_in">next</span></span><br><span class="line">        <span class="keyword">return</span> dummy.<span class="built_in">next</span></span><br></pre></td></tr></table></figure>
<p>äº¤ä¸Šå»WAäº†ï¼Œé—®é¢˜å‡ºåœ¨å“ªå‘¢ï¼Ÿ èµ°ä¸€éå‡ºé”™çš„æ ·ä¾‹ï¼šè¾“å…¥[1,3,2,-3,-2,5,5,-5,1]ï¼ŒæœŸå¾…[1,5,1]ï¼Œè¾“å‡º[1,5,5,-5,1]</p>
<ol type="1">
<li><code>cur=p(1),sum=1,hash=&#123;0:dummy,1:p(1)&#125;</code></li>
<li><code>cur=p(3),sum=4,hash=&#123;0:dummy,1:p(1),4:p(3)&#125;</code></li>
<li><code>cur=p(2),sum=6,hash=&#123;0:dummy,1:p(1),4:p(3),6:p(2)&#125;</code></li>
<li><code>cur=p(-3),sum=3,hash=&#123;0:dummy,1:p(1),4:p(3),6:p(2),3:p(-3)&#125;</code></li>
<li><code>cur=p(-2),sum=1</code>ï¼šæ­¤æ—¶hashè¿”å›p(1)ï¼Œè®©p(1).nextæŒ‡å‘p(-2).nextï¼Œé“¾è¡¨å˜ä¸ºäº†[1,5,5,-5,1]ï¼Œ<code>hash=&#123;0:dummy,1:p(1),4:p(3),6:p(2),3:p(-3)&#125;</code></li>
<li><code>cur=p(5),sum=6</code>ï¼šæ­¤æ—¶hashè¿”å›p(2)ï¼Œä½†æ­¤æ—¶p(2)å·²ç»åˆ é™¤ï¼Œå› æ­¤è®©p(2).nextæŒ‡å‘p(5).nextè‚¯å®šæ˜¯é”™çš„ã€‚</li>
</ol>
<p>è‡³æ­¤åº”è¯¥å¯ä»¥çœ‹å‡ºé—®é¢˜äº†ï¼šåœ¨åˆ é™¤æ”¹å˜é“¾è¡¨æŒ‡é’ˆçš„åŒæ—¶ï¼Œhashtableå¹¶æ²¡æœ‰åšç›¸åº”çš„åŒæ­¥åˆ æ‰å¯¹åº”çš„å…ƒç´ ï¼Œæ‰€ä»¥æ¯å½“å‡ºç°é‡å¤å‰ç¼€å’Œæ—¶åªè¦åˆ æ‰hashtableä¸­ä¸¤æ¬¡å‰ç¼€å’Œä¹‹é—´çš„é¡¹å³å¯ï¼Œå¯ä»¥å€ŸåŠ©<code>OrderedDict()</code>å®ç°ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºå³é“¾è¡¨é¡ºåºæœ‰åºï¼š</p>
<ol type="1">
<li><code>cur=p(-3),sum=3,hash=&#123;0:dummy,1:p(1),4:p(3),6:p(2),3:p(-3)&#125;</code></li>
<li><code>cur=p(-2),sum=1</code>ï¼šæ­¤æ—¶hash(1)è¿”å›p(1)ï¼Œåˆ é™¤åä¸º<code>hash=&#123;0:dummy,1:p(1)</code></li>
<li><code>cur=p(5),sum=6</code>ï¼šæ­¤æ—¶hashè¿”å›<code>None</code>ï¼Œç¬¦åˆé¢„æœŸï¼Œç»§ç»­è¿­ä»£å³å¯ã€‚</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"># class ListNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, val=0, next=None):</span></span><br><span class="line"><span class="comment">#         self.val = val</span></span><br><span class="line"><span class="comment">#         self.next = next</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">removeZeroSumSublists</span>(<span class="params">self, head: ListNode</span>) -&gt; ListNode:</span></span><br><span class="line">        dummy = ListNode(<span class="built_in">next</span>=head)</span><br><span class="line">        cur = head</span><br><span class="line">        prefix_sum = <span class="number">0</span></span><br><span class="line">        hashtable = OrderedDict(&#123;<span class="number">0</span>:dummy&#125;)</span><br><span class="line">        <span class="keyword">while</span> cur:</span><br><span class="line">            prefix_sum += cur.val</span><br><span class="line">            prev = hashtable.get(prefix_sum, cur)</span><br><span class="line">            <span class="keyword">while</span> prefix_sum <span class="keyword">in</span> hashtable:</span><br><span class="line">                hashtable.popitem()</span><br><span class="line">            hashtable[prefix_sum] = prev</span><br><span class="line">            prev.<span class="built_in">next</span> = cur = cur.<span class="built_in">next</span></span><br><span class="line">        <span class="keyword">return</span> dummy.<span class="built_in">next</span></span><br></pre></td></tr></table></figure>
<p>Two-passï¼š ä¸Šè¿°åšæ³•çš„hashtableè®°å½•çš„æ˜¯ç¬¬ä¸€æ¬¡å‡ºç°å‰ç¼€å’Œçš„ä½ç½®ã€‚ç°åœ¨æ¢ä¸€ç§æ€è·¯ï¼šé¦–å…ˆéå†ä¸€æ¬¡é“¾è¡¨ï¼Œhashtableè®°å½•<strong>æœ€åä¸€æ¬¡</strong>å‡ºç°å‰ç¼€å’Œçš„ä½ç½®ï¼Œç¬¬äºŒæ¬¡éå†é“¾è¡¨è®¾ç½®ç›¸åº”çš„æŒ‡é’ˆåˆ°æœ€åä¸€æ¬¡å‰ç¼€å’Œçš„ä½ç½®ï¼Œè¿™æ ·å³ä½¿ç¬¬ä¸€æ¬¡å‰ç¼€å’Œä½ç½®è¢«åˆ é™¤ï¼ŒæŒ‡é’ˆä¹Ÿä¼šç›¸åº”åœ°è·³è¿‡ï¼š</p>
<ol type="1">
<li>ç¬¬ä¸€æ¬¡éå†åï¼š<code>hash=&#123;0:dummy,1:p(-2),4:p(3),6:p(-5),3:p(-3),11:p(5),7:p(1)&#125;</code></li>
<li>ç¬¬äºŒæ¬¡éå†ï¼š<code>dummy.next=hash[0].next,p(1).next=hash[1].next=p(5),p(5).next=hash[6].next=p(1),p(1).next=hash[7].next=null</code></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"># class ListNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, val=0, next=None):</span></span><br><span class="line"><span class="comment">#         self.val = val</span></span><br><span class="line"><span class="comment">#         self.next = next</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">removeZeroSumSublists</span>(<span class="params">self, head: ListNode</span>) -&gt; ListNode:</span></span><br><span class="line">        dummy = ListNode(<span class="number">0</span>, head)</span><br><span class="line">        prefix_sum = <span class="number">0</span></span><br><span class="line">        hashtable = &#123;<span class="number">0</span>:dummy&#125;</span><br><span class="line">        <span class="keyword">while</span> head:</span><br><span class="line">            prefix_sum += head.val</span><br><span class="line">            hashtable[prefix_sum] = head</span><br><span class="line">            head = head.<span class="built_in">next</span></span><br><span class="line">            </span><br><span class="line">        prefix_sum = <span class="number">0</span></span><br><span class="line">        head = dummy</span><br><span class="line">        <span class="keyword">while</span> head:</span><br><span class="line">            prefix_sum += head.val</span><br><span class="line">            head.<span class="built_in">next</span> = hashtable[prefix_sum].<span class="built_in">next</span></span><br><span class="line">            head = head.<span class="built_in">next</span></span><br><span class="line">        <span class="keyword">return</span> dummy.<span class="built_in">next</span></span><br></pre></td></tr></table></figure>
<p>æ—¶é—´å¤æ‚åº¦<span class="math inline">\(O(n)\)</span>ï¼Œç©ºé—´å¤æ‚åº¦<span class="math inline">\(O(n)\)</span>ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://eimadrigal.github.io/2021/07/15/Research%20Proposal/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/favicon.png">
      <meta itemprop="name" content="EIMadrigal">
      <meta itemprop="description" content="Hello World">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EI Madrigal's Space">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/15/Research%20Proposal/" class="post-title-link" itemprop="url">Research Proposal</a>
        </h2>

        <div class="post-meta">

		  
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-07-15 02:35:00" itemprop="dateCreated datePublished" datetime="2021-07-15T02:35:00+08:00">2021-07-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Science/" itemprop="url" rel="index"><span itemprop="name">Computer Science</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>ç§‘ç ”åƒåœ¾</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/07/15/Research%20Proposal/">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="EIMadrigal"
      src="/images/favicon.png">
  <p class="site-author-name" itemprop="name">EIMadrigal</p>
  <div class="site-description" itemprop="description">Hello World</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">171</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/EIMadrigal" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;EIMadrigal" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:andrew.renj@gmail.com" title="E-Mail â†’ mailto:andrew.renj@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.cnblogs.com/EIMadrigal" title="cnblogs â†’ https:&#x2F;&#x2F;www.cnblogs.com&#x2F;EIMadrigal" rel="noopener" target="_blank"><i class="fab fa-codiepie fa-fw"></i>cnblogs</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/EIMadrigal" title="Weibo â†’ https:&#x2F;&#x2F;weibo.com&#x2F;EIMadrigal" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2018-02 â€“ 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">EIMadrigal</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>


    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <span id="busuanzi_container_site_pv">Total views: <span id="busuanzi_value_site_pv"></span></span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">Total visitors: <span id="busuanzi_value_site_uv"></span></span>
    <span class="post-meta-divider">|</span>

<script>
$(document).ready(function() {

    var int = setInterval(fixCount, 50);
    var countOffset = 20000;

    function fixCount() {            
       if (document.getElementById("busuanzi_container_site_pv").style.display != "none")
        {
            $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + countOffset); 
            clearInterval(int);
        }                  
        if ($("#busuanzi_container_site_pv").css("display") != "none")
        {
            $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + countOffset);
            clearInterval(int);
        }  
    }
       	
});
</script> 

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  


</body>
</html>
